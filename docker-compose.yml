version: "3.6"

services:
  library:
    container_name: ${PROJECT_NAME}_library
    image: openizr/node:2.0.0-dev
    env_file:
      - .env
    command: sh -c "dsync /mount/LICENSE /var/www/html/LICENSE & dsync /mount/README.md /var/www/html/README.md"
    volumes:
      - ./library:/var/www/html
      - ./:/mount
    restart: unless-stopped
  playground:
    container_name: ${PROJECT_NAME}_playground
    image: openizr/node:2.0.0-dev
    env_file:
      - .env
    ports:
      - "127.0.0.1:${PLAYGROUND_PORT}:${PLAYGROUND_PORT}"
    # You can switch between the following lines to play with either use case.
    # command: sh -c "cd vue && yarn && yarn run dev"
    # command: sh -c "cd react && yarn && yarn run dev"
    command: sh -c "cd library && yarn && yarn run dev"
    # command: sh -c "cd backend && yarn && yarn run dev"
    volumes:
      - ./playground:/var/www/html
      - ./library:/typescript-dev-kit
    restart: unless-stopped
networks:
  default:
    driver: bridge
    ipam:
      config:
        - subnet: 172.16.57.0/24
